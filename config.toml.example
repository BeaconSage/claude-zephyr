# Claude Zephyr 配置文件示例
# 复制此文件为 config.toml 并根据需要调整配置

# ============ 核心配置 ============
[server]
port = 8080                        # 服务监听端口

# ============ 界面配置 ============
[ui]
language = "zh"                    # 界面语言: "en" (English) 或 "zh" (中文)

# ============ 端点组配置 ============
# 主要API提供商 (必需配置)
[[groups]]
name = "primary-provider"           # 🔥 组名称，可自定义
auth_token_env = "AUTH_TOKEN_MAIN"  # 🔥 .env文件中的环境变量名
default = true                      # 🔥 设为默认组

# 该组的API端点
endpoints = [
    { url = "https://api.provider-a.com", name = "Provider-A-1" },
    { url = "https://api2.provider-a.com", name = "Provider-A-2" },
    { url = "https://backup.provider-a.com", name = "Provider-A-Backup" }
]

# 备用API提供商 (可选)
# [[groups]]
# name = "secondary-provider"
# auth_token_env = "AUTH_TOKEN_BACKUP"
# endpoints = [
#     { url = "https://api.provider-b.com", name = "Provider-B-1" },
#     { url = "https://api.provider-b.com/v2", name = "Provider-B-V2" }
# ]

# 专用API提供商 (如特定用途的端点)
# [[groups]]
# name = "special-provider"
# auth_token_env = "AUTH_TOKEN_SPECIAL"
# endpoints = [
#     { url = "https://premium.provider-c.com", name = "Premium-API" },
#     { url = "https://fast.provider-c.com", name = "Fast-API" }
# ]

# ============ 高级配置 (可选，通常无需修改) ============
[health_check]
# interval_seconds = 60              # 健康检查间隔（默认：60秒）
# min_interval_seconds = 30          # 最小间隔，高负载时使用（默认：30秒）
# max_interval_seconds = 3600         # 最大间隔，长时间空闲时使用（默认：1小时）
# timeout_seconds = 15               # 健康检查超时（默认：15秒）
# dynamic_scaling = true             # 自动调整检查频率（默认：false）
# claude_binary_path = "claude"      # Claude CLI 路径（默认：claude）

# switch_threshold_ms = 50           # 切换阈值(毫秒)
# graceful_switch_timeout_ms = 30000 # 优雅切换超时

# ============ 配置说明 ============
# 🔥 标记的是必须配置的项目
# 
# 1. 主要步骤:
#    - 设置 name (组名)
#    - 设置 auth_token_env (环境变量名)
#    - 配置 endpoints (API端点列表)
#    - 在 .env 文件中设置对应的认证令牌
#
# 2. 端点命名:
#    - name 必须唯一，建议使用提供商名称和节点标识
#    - 重点是API提供商而非地理位置
#
# 3. 认证令牌:
#    - 在 .env 文件中定义: AUTH_TOKEN_MAIN=sk-your-token-here
#    - 不要直接在此文件中写入令牌
#
# 4. 可选功能:
#    - 大部分高级配置都有合理默认值
#    - dynamic_scaling: 启用后会根据连接负载自动调整检查间隔
#      * 高负载时: 使用 min_interval_seconds (默认30秒)
#      * 空闲时: 渐进增加至 max_interval_seconds (默认1小时)
#      * 算法会在min和max之间平滑过渡，避免突变
#      * 长时间空闲可大幅节省成本，支持开着过夜