# Claude Zephyr 配置文件示例
# 复制此文件为 config.toml 并根据需要调整配置

[server]
port = 8080                        # 代理服务器监听端口
switch_threshold_ms = 50           # 触发端点切换的最小延迟改善(毫秒)
graceful_switch_timeout_ms = 30000 # 优雅切换的最大等待时间(毫秒)

# 全局健康检查配置
[health_check]
interval_seconds = 60              # 基础健康检查间隔(秒)
min_interval_seconds = 30          # 最小健康检查间隔(秒)，用于故障恢复期间的快速检查
max_interval_seconds = 3600        # 最大间隔1小时，用于稳定运行时的节能模式
timeout_seconds = 15               # 健康检查超时时间(秒)
dynamic_scaling = true             # 启用动态调整：健康检查间隔自适应调整
claude_binary_path = "claude"      # Claude CLI 二进制文件路径，默认从环境变量中查找

# 端点组配置 - 亚洲主要区域
[[groups]]
name = "asia-primary"
auth_token_env = "AUTH_TOKEN_ASIA"     # 引用 .env 文件中的环境变量
default = true                         # 设为默认端点组

# 该组的端点配置
endpoints = [
    { url = "https://cn1.instcopilot-api.com", name = "CN1", flag = "🇨🇳" },
    { url = "https://cn2.instcopilot-api.com", name = "CN2", flag = "🇨🇳" },
    { url = "https://hk.instcopilot-api.com",  name = "HK",  flag = "🇭🇰" },
    { url = "https://jp.instcopilot-api.com",  name = "JP",  flag = "🇯🇵" },
    { url = "https://sg.instcopilot-api.com",  name = "SG",  flag = "🇸🇬" }
]

# 备用端点组 - 美国区域 (可选)
# [[groups]]
# name = "us-backup"
# auth_token_env = "AUTH_TOKEN_US"
# endpoints = [
#     { url = "https://us1.example-api.com", name = "US1", flag = "🇺🇸" },
#     { url = "https://us2.example-api.com", name = "US2", flag = "🇺🇸" }
# ]

# 备用端点组 - 欧洲区域 (可选)
# [[groups]]
# name = "europe-backup" 
# auth_token_env = "AUTH_TOKEN_EU"
# endpoints = [
#     { url = "https://eu1.example-api.com", name = "EU1", flag = "🇪🇺" },
#     { url = "https://eu2.example-api.com", name = "EU2", flag = "🇪🇺" }
# ]

# 配置说明:
# 1. 每个 group 使用一个 AUTH_TOKEN，可以包含多个 endpoints
# 2. auth_token_env 引用 .env 文件中的环境变量名
# 3. endpoints 数组中的每个端点都必须有唯一的 name
# 4. flag 字段可以是任何 emoji 或文字，用于 UI 显示
# 5. default = true 的组将作为启动时的默认选择
# 6. 所有 AUTH_TOKEN 都应该在 .env 文件中定义，确保安全性