# Claude Zephyr Configuration Example (English)
# Copy this file to config.toml and adjust as needed

# ============ Core Configuration ============
[server]
port = 8080                        # Server listening port

# ============ UI Configuration ============
[ui]
language = "en"                    # Interface language: "en" (English) or "zh" (Chinese)

# ============ Endpoint Groups Configuration ============
# Primary API Provider (Required)
[[groups]]
name = "primary-provider"           # ðŸ”¥ Group name, customizable
auth_token_env = "AUTH_TOKEN_MAIN"  # ðŸ”¥ Environment variable name in .env file
default = true                      # ðŸ”¥ Set as default group

# API endpoints for this group
endpoints = [
    { url = "https://api.provider-a.com", name = "Provider-A-1" },
    { url = "https://api2.provider-a.com", name = "Provider-A-2" },
    { url = "https://backup.provider-a.com", name = "Provider-A-Backup" }
]

# Backup API Provider (Optional)
# [[groups]]
# name = "secondary-provider"
# auth_token_env = "AUTH_TOKEN_BACKUP"
# endpoints = [
#     { url = "https://api.provider-b.com", name = "Provider-B-1" },
#     { url = "https://api.provider-b.com/v2", name = "Provider-B-V2" }
# ]

# Specialized API Provider (e.g., specific purpose endpoints)
# [[groups]]
# name = "special-provider"
# auth_token_env = "AUTH_TOKEN_SPECIAL"
# endpoints = [
#     { url = "https://premium.provider-c.com", name = "Premium-API" },
#     { url = "https://fast.provider-c.com", name = "Fast-API" }
# ]

# ============ Advanced Configuration (Optional, usually no need to modify) ============
[health_check]
# interval_seconds = 60              # Health check interval (default: 60s)
# min_interval_seconds = 30          # Minimum interval for high load (default: 30s)
# max_interval_seconds = 3600        # Maximum interval for long idle (default: 1 hour)
# timeout_seconds = 15               # Health check timeout (default: 15s)
# dynamic_scaling = true             # Auto-adjust check frequency (default: false)
# claude_binary_path = "claude"      # Claude CLI path (default: claude)

# switch_threshold_ms = 50           # Switch threshold (milliseconds)
# graceful_switch_timeout_ms = 30000 # Graceful switch timeout

# ============ Retry Configuration (Optional) ============
[retry]
# enabled = true                     # Enable retry functionality (default: true)
# max_attempts = 3                   # Maximum retry attempts including initial request (default: 3)
# base_delay_ms = 1000              # Base delay time in milliseconds (default: 1000ms)
# backoff_multiplier = 2.0          # Exponential backoff multiplier (default: 2.0)

# ============ Logging Configuration (Optional) ============
[logging]
# level = "info"                     # Log level: trace, debug, info, warn, error (default: info)
# detail_level = "standard"          # Proxy request detail level (default: basic)
#                                    #   - basic: Only show endpoint URL
#                                    #   - standard: Add method, path, status code, response time
#                                    #   - detailed: Add request/response headers
#                                    #   - debug: Add request/response body (filters sensitive data)
# console_enabled = true             # Console output (default: true)
# file_enabled = false               # File output (default: false)
# file_path = "logs/claude-zephyr.log"  # Log file path
# max_file_size = 104857600          # Maximum file size in bytes (default: 100MB)
# max_files = 10                     # Number of log files to keep (default: 10)
# json_format = false                # JSON format output (default: false)

# ============ Configuration Notes ============
# ðŸ”¥ Marked items are required configurations
# 
# 1. Main steps:
#    - Set name (group name)
#    - Set auth_token_env (environment variable name)
#    - Configure endpoints (API endpoint list)
#    - Set corresponding auth tokens in .env file
#
# 2. Endpoint naming:
#    - name must be unique, suggest using provider name and node identifier
#    - Focus on API provider rather than geographic location
#
# 3. Authentication tokens:
#    - Define in .env file: AUTH_TOKEN_MAIN=sk-your-token-here
#    - Don't write tokens directly in this file
#
# 4. Optional features:
#    - Most advanced configurations have reasonable defaults
#    - dynamic_scaling: When enabled, automatically adjusts check frequency based on connection load
#      * High load: uses min_interval_seconds (default 30s)
#      * Idle periods: gradually increases to max_interval_seconds (default 1 hour)
#      * Algorithm smoothly transitions between min and max to avoid sudden changes
#      * Long idle periods can significantly save costs, supports overnight operation
#    - retry: Enables smart retry mechanism with exponential backoff
#    - logging: Configurable detailed log levels, debug level automatically filters sensitive information